{% extends 'base.html' %}

{% load humanize %}

{% block content %}

<div class="container">
	<h1>{{ current_month.month_str }} {{ current_month.year.year }}</h1>
	<p><a href="{% url 'new_event' %}">+ New Event</a></p>
	<p><a href="{% url 'new_calendar' %}">+ New Calendar</a></p>
	<table class="table table-bordered">
		<tbody>
			{% for week in month_weeks %}
				<tr>
					{% for day in week %}
						<td>{{ day.day_of_month|ordinal }} of {{ day.month.month_str }}
							<br>
							<ul>
								{% for event in day.sorted_events %}
									<li>
										<a href="{% url 'event_view' year=day.month.year.year month=day.month.month day=day.day_of_month pk=event.pk slug=event.slug %}">
										{% if event.start_date.day == day.day_of_month and not event.all_day%}
											{{ event.start_time|time:'f A' }}
										{% endif %}
										{{ event.title }} {% if event.all_day %}(All-day){% endif %}</a>
									</li>
								{% endfor %}
							</ul>
						</td>
					{% endfor %}
				</tr>
			{% endfor %}
		</tbody>
	</table>
	<a href="{% url 'month' year=next_month.year.year month=next_month.month %}">Next Month: {{ next_month.month_str }} {{ next_month.year.year }}</a> <br>
	<a href="{% url 'month' year=previous_month.year.year month=previous_month.month %}">Previous Month: {{ previous_month.month_str }} {{ previous_month.year.year }}</a>

	<h2>Calendars</h2>
	<ul>
	{% for calendar in calendars %}
		<li><a href="{% url 'calendar_view' slug=calendar.slug %}">{{ calendar.event_calendar }}</a></li>
	{% endfor %}
	</ul>

	<h2>Locations</h2>
	<ul>
	{% for location in locations %}
		<li><a href="{% url 'location_view' slug=location.slug %}">{{ location.location }}</a></li>
	{% endfor %}
	</ul>

</div>

{% endblock %}